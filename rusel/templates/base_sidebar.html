{% extends "base_rok.html" %}
{% load i18n static %}

{% block extrastyle %}
<style>
.level-0 { margin-left: 0px; }
.level-1 { margin-left: 10px; }
.level-2 { margin-left: 20px; }
.level-3 { margin-left: 30px; }
.level-4 { margin-left: 40px; }
.level-5 { margin-left: 50px; }
.level-6 { margin-left: 60px; }
</style>
{% endblock %}

{% block window %}

  <!-- Sidebar -->
  {% block sidebar %}
    {% if user.is_authenticated %}
      <div class="w3-sidebar w3-bar-block w3-card w3-collapse w3-theme-l4" style="width: 250px; height: auto; min-height: 590px;" id="mySidebar">
            <a class="w3-bar-item w3-button w3-hover-dark" href="{% url 'index' %}"><i class="fa fa-home"></i> {% trans 'main'|capfirst %}</a>
            {% for file in tree %}
              <div class="w3-hover-dark level-{{ file.level }}" style="display: flex; flex-direction: row;">
                  {% if file.is_node %}
                    <a href="{% url 'hier:toggle' file.id %}">
                      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" {% if file.is_open %} style="transform: rotate(90deg);" {% endif %}>
                        <path fill-rule="evenodd" d="M9 8l4 4-4 4z"></path> 
                      </svg>
                    </a>
                  {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" ></svg>
                  {% endif %}
                  <div>
                    <a class="w3-button w3-hover-dark" href="{% url 'hier:folder_list' file.id %}">{% if file.icon != "" %} <i class="fa fa-{{ file.icon }}" style="color: {{ file.color }};"></i>{% endif %} {{ file.name }}</a>
                  </div>
              </div>
            {% endfor %}
            <a class="w3-bar-item w3-button w3-hover-dark" href="{% url 'account:profile' %}"><i class="fa fa-user"></i> {% trans 'profile'|capfirst %}</a>
            <a class="w3-bar-item w3-button w3-hover-dark" href="{% url 'account:logout'  %}"><i class="fa fa-sign-out-alt"></i> {% trans 'logout'|capfirst  %}</a>
      </div>
    {% endif %}
  {% endblock %}

  <div id="main" class="w3-main" {% if user.is_authenticated %} style="margin-left:250px" {% endif %}>
    {% block navbar %}{{ block.super }}{% endblock %}
    {% block content %}{% endblock %}

    <div class="w3-bar w3-theme-l2 w3-center" id="footer">
      {% block footer %}{% endblock %}
    </div>
  </div>
{% endblock %}

{% block hamb %}
  {% if user.is_authenticated %}
    <button id="hamburger" class="w3-bar-item w3-button w3-hide-large" onclick="w3_open()">&#9776;</button>
  {% endif %}
{% endblock %}

{% block scripts %}
  {{ block.super }}
    <script>
      function w3_open() {
        document.getElementById("mySidebar").style.display = "block";
        document.getElementById("hamburger").style.display = 'none';
      }
      function w3_close() {
        document.getElementById("mySidebar").style.display = "none";
        document.getElementById("hamburger").style.display = "inline-block";
      }
    </script>  
{% endblock %}
