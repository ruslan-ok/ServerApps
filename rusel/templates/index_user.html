{% extends "hier/page.html" %}
{% load static i18n %}

{% block aside_conent %}
  <div class="launcher-menu">
    {% for app in apps %}
      <a href="{{ app.href }}" class="launcher-button"><img src="{% static app.icon %}"><span class="marked">{{ app.name }}</span></a>
    {% endfor %}
  </div>
{% endblock %}

{% block content %}
  <div class="w3-container">
        <h3>
          {{ title|capfirst }}
        </h3>
  
    <div class="w3-row w3-padding">
      <a href="{% url 'trip:main' %}">{{ trip_summary|safe }}</a>
      {% if last_visited_url %}
        <p><a href="{{ last_visited_url }}">{{ last_visited_app }} - {{ last_visited_page }}</a></p>
      {% endif %}
    
      {% if user.username == 'ruslan.ok' %}
        <br><br><br>
        {% if debug %}
          <h2 class="w3-text-red">Warning: Debug mode</h2><br><br><br>
        {% endif %}

        {% if show_stat %}
          <table>
            <tr> <th>{% trans 'application'|capfirst %}</th> <th>{% trans 'visitor'|capfirst %}</th> <th>{% trans 'page'|capfirst %}</th> </tr>
            {% for app, hosts in stat.items %}
              <tr> <td>{{ app }}</td> <td></td> <td></td> </tr>
              {% for host, pages in hosts.items %}
                <tr> <td></td> <td>{{ host }}</td> <td></td> </tr>
                  {% for page in pages %}
                    <tr> <td></td> <td></td> <td>{{ page }}</td> </tr>
                  {% endfor %}
              {% endfor %}
            {% endfor %}
          </table>
          <br><br>
        {% endif %}
        
        {% if indicators %}
          <table>
            <tr> <th>{% trans 'indictor'|capfirst %}</th> <th>{% trans 'value'|capfirst %}</th> </tr>
            {% for x in indicators %}
              <tr> <td>{{ x.0 }}</td> <td>{{ x.1 }}</td> </tr>
            {% endfor %}
          </table>
          <br><br><br>
        {% endif %}
        
        <table>
          <tr> <th>{% trans 'product'|capfirst %}</th> <th>{% trans 'version'|capfirst %}</th> <th>{% trans 'check new version'|capfirst %}</th></tr>
          <tr> <td> Python </td> <td> {{ python_version }} </td> <td><a href="https://www.python.org/downloads/">python.org</a></td> </tr>
          <tr> <td> Django </td> <td> {{ django_version }} </td> <td><a href="https://www.djangoproject.com/download/">djangoproject.com</a></td> </tr>
          <tr> <td> Apache </td> <td> {{ apache_version }} </td> <td><a href="https://httpd.apache.org/download.cgi">apache.org</a></td> </tr>
          <tr> <td> MySQL  </td> <td> {{ mysql_version }} </td> <td><a href="https://dev.mysql.com/downloads/mysql/">dev.mysql.com</a></td> </tr>
          <tr> <td> SSL-certificate </td> <td> {{ cert_termin }} </td> <td><a href="https://letsencrypt.org/ru/docs/">letsencrypt.org</a></td> </tr>
          <tr> <td> hMailServer  </td> <td> {{ hmail_version }} </td> <td><a href="https://www.hmailserver.com/download">hmailserver.com</a></td> </tr>
        </table>

      {% endif %}
    </div>
  </div>
{% endblock %}
