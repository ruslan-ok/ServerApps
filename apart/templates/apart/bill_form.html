{% extends "apart/apart.html" %}
{% load static i18n %}

{% block extrastyle %}
  <link rel="stylesheet" type="text/css" href="{% static 'apart/css/apart.css' %}">
{% endblock %}


{% block article_content %}
  <div class="fields">
    <form method="post">{% csrf_token %}
      <div class="header">
        {% if form.errors %}
          <div class="fieldset">
            <p class="errornote"> {% if form.errors.items|length == 1 %}{% trans "Please correct the error below." %}{% else %}{% trans "Please correct the errors below." %}{% endif %} </p> 
          </div>
        {% endif %}
        {% if form.non_field_errors %}
          <div class="fieldset">
          {% for error in form.non_field_errors %} <p class="errornote"> {{ error }} </p> {% endfor %}
          </div>
        {% endif %}

        <div class="field-group">
          <div class="article-name">
            <div class="section-item">
              <div class="editable-content">
                {{ form.period.errors }} 
                <div class="">{{ form.period.label_tag }}</div>
                {{ form.period }}
              </div>
              <button type="submit" name="bill-save" class="field-icon"><img src="{% static 'rok/icon/save.png' %}"></button>
            </div>
          </div>
        </div>
      </div>
    
      <div class="body">
        <div class="section">
          <div class="section-item">
            {{ form.payment.errors }} 
            <div class="section-inner-label">{{ form.payment.label_tag }}</div>
          </div>
          <div class="section-item">
            <div class="editable-content">
              {{ form.payment }}
            </div>
          </div>

    <table>
    <tbody>
      <tr> <td style="width: 25%"></td>
        <td style="width: 25%"> <b>{% trans 'old'|capfirst %}</b> </td>
        <td style="width: 25%"> <b>{% trans 'new'|capfirst %}</b> </td>
        <td style="width: 25%"> <b>{% trans 'volume'|capfirst %}</b> </td>
      </tr>
      <tr><td>{% trans 'electro'|capfirst %}</td>
        <td>{{ prev.el }}</td>
        <td>{{ curr.el }}</td>
        <td>{{ volume.el }}</td>
      </tr>
      {% if apart.has_gas %}
      <tr><td>{% trans 'gas'|capfirst %}</td>
        <td>{{ prev.ga }}</td>
        <td>{{ curr.ga }}</td>
        <td>{{ volume.ga }}</td>
      </tr>
      {% endif %}
      <tr><td>{% trans 'cold'|capfirst %}</td>
        <td>{{ prev.cw }}</td>
        <td>{{ curr.cw }}</td>
        <td>{{ volume.wt }}</td>
      </tr>
      <tr><td>{% trans 'hot'|capfirst %}</td>
        <td>{{ prev.hw }}</td>
        <td>{{ curr.hw }}</td>
        <td></td>
      </tr>
      <tr><td>&nbsp;</td> <td></td> <td></td> <td></td> </tr>
      <tr> <td></td> <td> <b>Тариф</b> </td> <td> <b>Начислено</b> </td> <td> <b>Оплата</b> </td> </tr>
      <tr><td>{% trans 'internet'|capfirst %}</td>
          <td></td>
          <td class="rok-field">{{ form.tv_bill.errors }} {{ form.tv_bill }}</td>
          <td class="rok-field">{{ form.tv_pay.errors }} {{ form.tv_pay }}</td>
      </tr>
      <tr><td>{% trans 'phone'|capfirst %}</td>
          <td></td>
          <td class="rok-field">{{ form.phone_bill.errors }} {{ form.phone_bill }}</td>
          <td class="rok-field">{{ form.phone_pay.errors }} {{ form.phone_pay }}</td>
      </tr>
    {% if period_num >= 201508 %}
      <tr><td>{% trans 'communal'|capfirst %}</td>
          <td></td>
          <td class="rok-field">{{ form.zhirovka.errors }} {{ form.zhirovka }}</td>
          <td class="rok-field">{{ form.ZKX_pay.errors }} {{ form.ZKX_pay }}</td>
      </tr>
    {% else %}
      <tr><td>{% trans 'bill'|capfirst %}</td>
          <td></td>
          <td class="rok-field">{{ form.zhirovka.errors }} {{ form.zhirovka }}</td>
          <td> {{ form.zhir_pay }} </td>
      </tr>
      <tr><td>{% trans 'heat'|capfirst %}</td>
          <td></td>
          <td></td>
          <td class="rok-field">{{ form.hot_pay.errors }} {{ form.hot_pay }}</td>
      </tr>
      <tr><td>{% trans 'overhaul'|capfirst %}</td>
          <td></td>
          <td></td>
          <td class="rok-field">{{ form.repair_pay.errors }} {{ form.repair_pay }}</td>
      </tr>
      <tr><td>{% trans 'HCS' %}</td>
          <td></td>
          <td></td>
          <td class="rok-field">{{ form.ZKX_pay.errors }} {{ form.ZKX_pay }}</td>
      </tr>
    {% endif %}
      <tr><td>{% trans 'electro'|capfirst %}</td>
          <td>{{ el_tar }}</td>
          <td>{{ el_bill }}</td>
          <td class="rok-field">{{ form.el_pay.errors }} {{ form.el_pay }}</td>
      </tr>
      {% if apart.has_gas %}
      <tr><td>{% trans 'gas'|capfirst %}</td>
          <td>{{ gas_tar }}</td>
          <td>{{ gas_bill }}</td>
          <td class="rok-field">{{ form.gas_pay.errors }} {{ form.gas_pay }}</td>
      </tr>
      {% endif %}
      <tr><td>{% trans 'water'|capfirst %}</td>
          <td>{{ water_tar }}</td>
          <td>{{ water_bill }}</td>
          <td class="rok-field">{{ form.water_pay.errors }} {{ form.water_pay }}</td>
      </tr>
    </tbody>
    </table>

        <div class="section">
            <div class="section-item section-item-note">
              <div class="field-error">{{ form.info.errors }}</div>
              <div class="section-inner">
                {{ form.info }}
              </div>
            </div>
        </div>

        </div>
      </div>
    </form>
  </div>
{% endblock %}


